<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cynthia - Speech to Speech</title>
    <link rel="icon" type="image/x-icon" href="./Pics/preview.png">
    <link rel="stylesheet" href="cynthia.css" reload="true">
</head>

<body>
    <div class="reload-it"><img src="./Pics/icons8-reload-100.png" class="reload-img"></div>
    <script>
        const Reload = document.querySelector('.reload-it');
        const ChangeImage = document.querySelector('.reload-img');

        Reload.addEventListener('click', () => {
            ChangeImage.src = './Pics/cargando-unscreen.gif'; // replace with your new image path
            setTimeout(() => {
                window.location.reload();
            }, 3000); // 3000 milliseconds = 3 seconds
        });
    </script>
    <div class="reload-it-two"><img src="./Pics/icons8-catalog-100.png" class="reload-img"></div>
    <div class="Up-info">Secret words to say</div>
    <div class="cynthia-present"></div>
    <div class="text-loading">
        <p class="par-888"></p>
    </div>
    <script>
        // Request speaker access
        navigator.mediaDevices.getUserMedia({
                audio: true
            })
            .then((stream) => {
                console.log('Microphone access granted');

                // Get available voices
                const synth = window.speechSynthesis;
                const cynthiaPresent = document.querySelector('.cynthia-present');
                let originalSize = 300; // initial size
                let currentSize = originalSize;
                let words = 'Hi there, lovely to meet you! I am Cynthia, your friendly speech  to  speech AI companion.I am excited to learn and improve with your help.Can you help me become a pro at conversations ? I will love to chat and sound more like a human, naturally.Lets get started and make our conversationÂ  sparkle '.split('.');
                let index = 0;

                // Wait for voices to be loaded
                synth.onvoiceschanged = () => {
                    const voices = synth.getVoices();

                    // Filter US voices
                    const usVoices = voices.filter(voice => voice.lang.includes('en-US'));

                    if (usVoices.length > 0) {
                        const voice = usVoices[0]; // Select the first US voice

                        function speakWord() {
                            if (index < words.length) {
                                const word = words[index];
                                const utterance = new SpeechSynthesisUtterance(word);
                                utterance.voice = voice;

                                // Add event listeners to utterance
                                utterance.onstart = () => {
                                    // Increase size when speaking starts
                                    currentSize += 70;
                                    cynthiaPresent.style.width = `${currentSize}px`;
                                    cynthiaPresent.style.height = `${currentSize}px`;
                                    cynthiaPresent.style.borderRadius = `${currentSize / 2}px`;
                                };

                                utterance.onend = () => {
                                    // Decrease size when speaking ends
                                    cynthiaPresent.style.width = `${currentSize - 70}px`;
                                    cynthiaPresent.style.height = `${currentSize - 70}px`;
                                    cynthiaPresent.style.borderRadius = `${(currentSize - 70) / 2}px`;
                                    currentSize -= 70;
                                    index++;
                                    speakWord();
                                };

                                synth.speak(utterance);
                            }
                        }

                        speakWord();
                    } else {
                        console.log('No US voice available');
                    }
                };
            })
            .catch((error) => {
                console.error('Microphone access denied');
            });
    </script>
</body>

</html>
